"use strict";(self.webpackChunksaurus=self.webpackChunksaurus||[]).push([[4659],{5854:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>l,contentTitle:()=>d,default:()=>p,frontMatter:()=>r,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"developer-guide/projects/otk/omnifest/index","title":"Omnifest","description":"An omnifest is the name for the YAML-based format that is used by otk as its input. otk transforms omnifests into inputs for other image build tools. To do so it works with directives.","source":"@site/docs/developer-guide/02-projects/otk/03-omnifest/index.md","sourceDirName":"developer-guide/02-projects/otk/03-omnifest","slug":"/developer-guide/projects/otk/omnifest/","permalink":"/docs/developer-guide/projects/otk/omnifest/","draft":false,"unlisted":false,"editUrl":"https://github.com/osbuild/osbuild.github.io/tree/main/docs/developer-guide/02-projects/otk/03-omnifest/index.md","tags":[],"version":"current","frontMatter":{},"sidebar":"developer","previous":{"title":"Usage","permalink":"/docs/developer-guide/projects/otk/usage"},"next":{"title":"Directive","permalink":"/docs/developer-guide/projects/otk/omnifest/directive"}}');var n=o(4848),s=o(8453);const r={},d="Omnifest",l={},c=[{value:"Entrypoint",id:"entrypoint",level:2},{value:"Targets",id:"targets",level:2}];function a(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"omnifest",children:"Omnifest"})}),"\n",(0,n.jsxs)(t.p,{children:["An omnifest is the name for the YAML-based format that is used by ",(0,n.jsx)(t.code,{children:"otk"})," as its input. ",(0,n.jsx)(t.code,{children:"otk"})," transforms omnifests into inputs for other image build tools. To do so it works with ",(0,n.jsx)(t.a,{href:"/docs/developer-guide/projects/otk/omnifest/directive",children:"directives"}),"."]}),"\n",(0,n.jsx)(t.h2,{id:"entrypoint",children:"Entrypoint"}),"\n",(0,n.jsxs)(t.p,{children:["As omnifests can include other omnifests it is important to note that ",(0,n.jsx)(t.code,{children:"otk"})," treats the entrypoint omnifest differently from included omnifests. The entrypoint omnifest is the file that is passed to ",(0,n.jsx)(t.code,{children:"otk compile [file]"}),". This entrypoint is required to have:"]}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["An ",(0,n.jsx)(t.a,{href:"/docs/developer-guide/projects/otk/omnifest/directive#otkversion",children:"otk.version"})," directive."]}),"\n",(0,n.jsxs)(t.li,{children:["An ",(0,n.jsx)(t.a,{href:"/docs/developer-guide/projects/otk/omnifest/directive#otktarget",children:"otk.target"})," directive."]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"A minimal entrypoint would look like:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-yaml",children:'otk.version: "1"\n\notk.target.osbuild:\n  example: "data"\n'})}),"\n",(0,n.jsx)(t.h2,{id:"targets",children:"Targets"}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.a,{href:"/docs/developer-guide/projects/otk/omnifest/directive#otktargetconsumername",children:"otk.target.<consumer>(.<name>)"})," directives in the omnifest provide the umbrella to put exports under. They are namespaced to a specific consumer (e.g. ",(0,n.jsx)(t.code,{children:"osbuild"}),")."]}),"\n",(0,n.jsx)(t.p,{children:"An omnifest that contains a single target will use that target by default:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"\u20ac otk compile example.yaml  # example from above\n# ...\n"})}),"\n",(0,n.jsx)(t.p,{children:"When a file contains multiple targets an error will be shown; you'll have to select the target you want to export."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"\u20ac otk compile example.yaml  # contains `osbuild.ami` and `osbuild.iso` targets\nCRITICAL:otk.command:INPUT contains multiple targets, `-t` is required\n\u20ac otk compile example.yaml -t osbuild.iso\n# ...\n"})}),"\n",(0,n.jsx)(t.p,{children:"Only a single target can be selected for export at a time."})]})}function p(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(a,{...e})}):a(e)}},8453:(e,t,o)=>{o.d(t,{R:()=>r,x:()=>d});var i=o(6540);const n={},s=i.createContext(n);function r(e){const t=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:r(e.components),i.createElement(s.Provider,{value:t},e.children)}}}]);